// Spicr v1.0.9 | thednp Â© 2021 | MIT-License
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Spicr=e()}(this,(function(){"use strict";var t=/iPhone|iPad|iPod|Android/i,e=navigator.userAgentData?navigator.userAgentData.brands.some((function(e){return t.test(e.brand)})):t.test(navigator.userAgent),n="ontouchstart"in window||navigator.msMaxTouchPoints||!1,a="onmouseleave"in document?["mouseenter","mouseleave"]:["mouseover","mouseout"],r=!!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){return t=!0}});document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t,e)}),e)}catch(t){throw Error("Passive events are not supported")}return t}()&&{passive:!0};function i(t){return"true"===t||"false"!==t&&(Number.isNaN(+t)?""===t||"null"===t?null:t:+t)}var s={};function o(t,e,n){var a=e.trim().split(/[,|;]/),r={};return a.forEach((function(e){var a=e.split(/[:|=]/),i=a[0],s=a[1],o=/y/i.test(i)||/v/i.test(s)?"offsetHeight":"offsetWidth";n&&/%/.test(s)&&!/z/i.test(i)?r[i]=s:r[i]=/%/.test(s)?parseFloat(s)*t[o]/100:parseFloat(s)})),r}var c={delay:250,duration:500,easing:"easingCubicOut",interval:5e3,touch:!0,pause:"hover"};function u(t){var e=function(t){var e={};return["translate","rotate","scale","transform-origin","opacity","duration","delay","easing"].forEach((function(n){e["transform-origin"===n?"origin":n]=t.getAttribute("data-"+n)})),e}(t),n=e.translate,a=e.rotate,r=e.origin,i=e.opacity,s=e.easing,u=e.scale,l=e.duration,f=e.delay;return u=parseFloat(u),l=+l,f=+f,{translate:n?o(t,n):"",rotate:a?o(t,a):"",origin:r?o(t,r,1):"",scale:Number.isNaN(u)?"":u,opacity:"false"!==i?1:0,duration:Number.isNaN(l)?c.duration:l,delay:Number.isNaN(f)?0:f,easing:s||c.easing}}function l(t){return Array.from(t.getElementsByClassName("spicr-layer"))}function f(t,e,n){var a=t[e]||t[0],r=l(a),i=a.classList.contains("active"),o=t[n],c=o&&o.getElementsByClassName("item-bg")[0],f=c?u(c):0;return f?(Object.keys(f).forEach((function(t){/translate|rotate/.test(t)&&f[t]instanceof Object&&Object.keys(f[t]).forEach((function(e){f[t][e]=-f[t][e]}))})),r.map((function(t){return s.layer(t,0,f)}))):r.map((function(t){return s.layer(t,i?0:1)}))}function d(t,o){var u,l,d,m=this,y=(u=t,d=l&&l instanceof Element?l:document,u instanceof Element?u:d.querySelector(u)),h=function(t,e,n,a){var r={},s={},o=Object.assign({},t.dataset);return Object.keys(o).forEach((function(t){var e=t.includes(a)?t.replace(a,"").replace(/[A-Z]/,(function(t){return t.toLowerCase()})):t;s[e]=i(o[t])})),Object.keys(n).forEach((function(t){n[t]=i(n[t])})),Object.keys(e).forEach((function(t){r[t]=t in n?n[t]:t in s?s[t]:e[t]})),r}(y,c,o||{}),g=this;g.tweens=[];var p=g.tweens,v={},x=a;n&&e&&(x=["touchstart","touchend"]);var E=h.pause,T=h.touch,L=h.interval,b=y.getElementsByClassName("item"),z=y.querySelectorAll("[data-slide]"),O=z.length&&z[0],N=z.length&&z[1],A=y.getElementsByClassName("spicr-pages")[0],C=A&&A.querySelectorAll("[data-slide-to]"),S=null,X=null,w=0,I=0,j=y.classList.contains("spicr-slider"),k=y.classList.contains("spicr-carousel");function D(){y.classList.contains("paused")||(y.classList.add("paused"),I||(clearInterval(S),S=null))}function _(){y.classList.contains("paused")&&(y.classList.remove("paused"),I||(clearInterval(S),S=null,g.cycle()))}function B(t){if(t.preventDefault(),!I){var e=t.target,n=e&&e.getAttribute("data-slide-to");e&&!e.classList.contains("active")&&n&&(w=parseInt(n,10),g.slideTo(w))}}function M(t){if(t.preventDefault(),!I){this===N||N.contains(this)?w+=1:(this===O||O.contains(this))&&(w-=1),g.slideTo(w)}}function P(t){v.isTouch||(v.startX=t.changedTouches[0].pageX,y.contains(t.target)&&(v.isTouch=!0,H(1)))}function q(t){v.isTouch&&(v.currentX=t.changedTouches[0].pageX,"touchmove"===t.type&&t.changedTouches.length>1&&t.preventDefault())}function F(t){if(v.isTouch&&!I&&(v.endX=v.currentX||t.changedTouches[0].pageX,v.isTouch)){if((!y.contains(t.target)||!y.contains(t.relatedTarget))&&Math.abs(v.startX-v.endX)<75)return;v.currentX<v.startX?w+=1:v.currentX>v.startX&&(w-=1),v.isTouch=!1,g.slideTo(w),H()}}function H(t){var e=t?"addEventListener":"removeEventListener";y[e]("touchmove",q,r),y[e]("touchend",F,r)}function Z(t){var e=t?"addEventListener":"removeEventListener";"hover"===E&&L&&(y[e](x[0],D),y[e](x[1],_)),N&&N[e]("click",M),O&&O[e]("click",M),T&&b.length>1&&y[e]("touchstart",P,r),A&&A[e]("click",B)}function K(t){Array.from(C).map((function(t){return t.classList.remove("active")})),t&&t.classList.add("active")}function U(t,e){w=e,b[e].classList.add("next"),I=!0,k&&t>-1&&b[t].offsetHeight!==b[e].offsetHeight&&(y.style.height=getComputedStyle(b[t]).height)}function V(t,e){b[e].classList.add("active"),b[e].classList.remove("next"),b[t]&&b[t].classList.remove("active"),setTimeout((function(){k&&(y.style.height=""),s.reset(y),I=!1,p=[],L&&!y.classList.contains("paused")&&g.cycle()}),0)}this.getActiveIndex=function(){var t=y.getElementsByClassName("item active")[0];return Array.from(b).indexOf(t)},this.cycle=function(){clearInterval(S),S=setTimeout((function(){w+=1,g.slideTo(w)}),L)},this.slideTo=function(t){var e=t,n=m.getActiveIndex();n===e||I||(clearInterval(S),S=setTimeout((function(){if(n<e||0===n&&e===b.length-1?X=1:(n>e||n===b.length-1&&0===e)&&(X=0),e<0?e=b.length-1:e>=b.length&&(e=0),j){U(n,e);var t=-1!==n?f(b,n,e):f(b,n),a=-1!==n&&f(b,e);-1===n?t.length&&(p=p.concat(t)):(t.length&&(p=p.concat(t)),a.length&&(p=p.concat(a))),p.length?(p.reduce((function(t,e){return t._duration+t._delay>e._duration+e._delay?t:e}))._onComplete=function(){return V(n,e)},p.forEach((function(t){return t.start()}))):V(n,e),C&&K(C[e])}else if(k){U(n,e);var r=c.delay,i=c.duration,o=c.easing,u=b[n],l=b[e];(p=s.carousel(y,b,n,e,X)).length?(u&&u.offsetHeight!==l.offsetHeight&&p.push(s.fromTo(y,{height:parseFloat(getComputedStyle(u).height)},{height:parseFloat(getComputedStyle(l).height)},{easing:o,duration:i,delay:Math.max.apply(Math,p.map((function(t){return t._delay+t._duration})))||r})),p[p.length-1]._onComplete=function(){return V(n,e)},p.forEach((function(t){return t.start()}))):V(n,e),C&&K(C[e])}}),1))},this.dispose=function(){I&&p.forEach((function(t){return t.stop()})),s.reset(y),v={},Z(),clearInterval(S),delete y.Spicr},y.Spicr&&y.Spicr.dispose(),Z(1),y.Spicr=g,y.getElementsByClassName("item active").length?L&&g.cycle():g.slideTo(0)}if(void 0===window.KUTE)throw Error("Spicr requires KUTE.js ^2.0.10");function m(t){var e=t instanceof Element?t:document;Array.from(e.querySelectorAll('[data-function="spicr"]')).forEach((function(t){return new d(t)}))}s.fromTo=window.KUTE.fromTo,s.carousel=function(t,e,n,a,r){var i=[],f=u(t),d={},m={},y={},h={},g=e[n],p=g&&l(g),v=l(e[a]),x=f.translate,E=f.rotate,T=f.scale,L=t.getAttribute("data-transform-origin"),b=f.opacity,z=f.easing,O=f.duration||c.duration,N=f.delay||+O/2;if(b&&(d.opacity=1,m.opacity=0,y.opacity=0,h.opacity=1),(T||x||E)&&(d.transform={},m.transform={},y.transform={},h.transform={}),T&&(d.transform.scale=1,m.transform.scale=T,y.transform.scale=T,h.transform.scale=1),x){d.transform.translate3d=[0,0,0];var A=0,C=0,S=0;"x"in x&&(A=r?-x.x:x.x),"y"in x&&(C=r?-x.y:x.y),"Z"in x&&(S=r?-x.z:x.z),m.transform.translate3d=[A,C,S];var X=0,w=0,I=0;"x"in x&&(X=r?x.x:-x.x),"y"in x&&(w=r?x.y:-x.y),"Z"in x&&(I=r?x.z:-x.z),y.transform.translate3d=[X,w,I],h.transform.translate3d=[0,0,0]}if(E){d.transform.rotate3d=[0,0,0];var j=0,k=0,D=0;"x"in E&&(j=r?-E.x:E.x),"y"in E&&(k=r?-E.y:E.y),"Z"in E&&(D=r?-E.z:E.z),m.transform.rotate3d=[j,k,D];var _=0,B=0,M=0;"x"in E&&(_=r?E.x:-E.x),"y"in E&&(B=r?E.y:-E.y),"Z"in E&&(M=r?E.z:-E.z),y.transform.rotate3d=[_,B,M],h.transform.rotate3d=[0,0,0]}r||(p&&p.reverse(),v.reverse()),b||E||x||T||(O=50,N=0);var P={easing:z,duration:O},q=P;return p&&p.forEach((function(t,e){if(P.delay=c.delay*e,i.push(s.fromTo(t,d,m,P)),L){var n=o(t,L),a="50%",r="50%",u="z"in n?" "+n.z+"px":"";"x"in n&&(a=/%/.test(n.x)?n.x:n.x+"px"),"y"in n&&(r=/%/.test(n.y)?n.y:n.y+"px"),t.style.transformOrigin=a+" "+r+u}})),v.forEach((function(t,e){if(q.delay=(N+50)*e,i.push(s.fromTo(t,y,h,q)),L){var n=o(t,L),a="50%",r="50%",c="z"in n?" "+n.z+"px":"";"x"in n&&(a=/%/.test(n.x)?n.x:n.x+"px"),"y"in n&&(r=/%/.test(n.y)?n.y:n.y+"px"),t.style.transformOrigin=a+" "+r+c}})),i},s.layer=function(t,e,n){var a=n||u(t),r=t.classList.contains("item-bg"),i={},o={},l=a.translate,f=a.rotate,d=a.scale,m=a.origin,y=a.opacity,h=a.duration,g=a.easing,p=a.delay||(r?0:c.delay);if(/InOut/.test(g)||n||(g=e?g.replace("In","Out"):g.replace("Out","In")),e||(h=r?h:1.5*h),p=e?p:0,(y=!e&&r&&n?0:y)&&(i.opacity=e?0:1,o.opacity=e?1:0),(d||l||f)&&(i.transform={},o.transform={},m)){var v="50%",x="50%",E="z"in m?" "+m.z+"px":"";"x"in m&&(v=/%/.test(m.x)?m.x:m.x+"px"),"y"in m&&(x=/%/.test(m.y)?m.y:m.y+"px"),t.style.transformOrigin=v+" "+x+E}if(d&&(i.transform.scale=e?d:1,o.transform.scale=e?1:d),l){var T=e&&l.x?l.x:0,L=l.x&&!e?l.x:0,b=e&&l.y?l.y:0,z=l.y&&!e?l.y:0,O=e&&l.z?l.z:0,N=l.z&&!e?l.z:0;i.transform.translate3d=[T,b,O],o.transform.translate3d=[L,z,N]}if(f){var A=e&&f.x?f.x:0,C=!e&&f.x?f.x:0,S=e&&f.y?f.y:0,X=!e&&f.y?f.y:0,w=e&&f.z?f.z:0,I=!e&&f.z?f.z:0;i.transform.rotate3d=[A,S,w],o.transform.rotate3d=[C,X,I]}return y||f||l||d||(h=50,p=0),s.fromTo(t,i,o,{easing:g,duration:h,delay:p})},s.reset=function(t){Array.from(t.getElementsByClassName("spicr-layer")).forEach((function(t){t.style.opacity="",t.style.transform="",t.style.transformOrigin=""}))},d.initComponent=m,document.body?m():document.addEventListener("DOMContentLoaded",m,{once:!0});return d.Version="1.0.9",d}));
